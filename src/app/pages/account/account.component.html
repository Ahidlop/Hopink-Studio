<div class="accountPage" *ngIf="!isLoggedIn">
  <h2>Bienvenido a HopInk</h2>
  <div class="accountForms">
    <form [formGroup]="loginForm" (ngSubmit)="login()">
      <h3>Iniciar sesión</h3>
      <input type="email"       formControlName="email"    placeholder="Email" required>
      <input type="password"    formControlName="password" placeholder="Contraseña" required>
      <button type="submit" class="next">Siguiente</button>
    </form>

    <form [formGroup]="registerForm" (ngSubmit)="register()">
      <h3>Registrarse</h3>
      <input type="text"        formControlName="name"     placeholder="Nombre completo" required>
      <input type="email"       formControlName="email"    placeholder="Email" required>
      <input type="password"    formControlName="password" placeholder="Contraseña" required>
      <button type="submit">Crear cuenta</button>
    </form>
  </div>
</div>

<div class="accountPage" *ngIf="isLoggedIn">
  <h2>Bienvenid&#64;, {{ user?.name }} </h2>
  <div class="accountContainer">
    <nav class="accountMenu">
      <a href="#profile">Mi perfil</a>
      <a href="#orders">Mis pedidos</a>
      <a href="#budgets">Mis presupuestos</a>
      <a routerLink="/accountLinks">Devoluciones</a>
      <a routerLink="/wishList">Lista de deseos</a>
      <a href="#settings">Configuración</a>
      <button (click)="logout()" class="logout">Cerrar sesión</button>
    </nav>

    <div class="accountContent">
      <section id="profile">
        <h3>Mi perfil</h3>
        <!-- Contenido del perfil aquí -->
      </section>

      <section id="orders">
        <h3>Mis pedidos</h3>
        <!-- Contenido de pedidos aquí -->
      </section>

      <!-- Presupuestos -->
       <section id="settings">
        <h3>Mis presupuestos</h3>
      
        <div *ngFor="let b of budgets" class="budget-card">
          <button class="close" (click)="confirmDelete(b)">X</button>
          <h4>
            {{ getServiceLabel(b.service) }} con {{ b.artist | titlecase }}
          </h4>

          <p><strong>Presupuesto:</strong> {{ b.budget }} €</p>
          <ng-container *ngIf="b.service !== 'piercing'">
            <p>Base: {{ getBasePrice(b.artist) }} €/hora</p>
            <p *ngIf="b.service === 'color'">+ Suplemento por color: 30 €</p>
            <p>Tiempo estimado: {{ getEstimatedHours(b.height, b.width) }} hora(s)</p>
            <p>Total estimado: {{ getTotalPrice(b.service, b.artist, b.height, b.width) }} €</p>
          </ng-container>
          <p><em>Fecha del presupuesto: {{ b.created_at | date:'dd/MM/yyyy HH:mm' }}</em></p>
        </div>
      </section>


      <section id="settings">
        <h3>Configuración</h3>
        <!-- Configuración del usuario -->
      </section>
    
  </div>


  <!-- Confirmación eliminar presupuesto -->
      <div *ngIf="showConfirmDelete" class="confirmDeleteIf">
        <div class="confirmDeleteBox">
          <p>¿Estás seguro que quieres borrar el presupuesto permanentemente?</p>
          <div class="deleteButtons">
            <button (click)="deleteBudget()">Sí, borrar</button>
            <button (click)="cancelDelete()">Cancelar</button>
          </div>
        </div>
      </div>
</div>

